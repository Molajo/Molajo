/*
* Kendo UI v2011.3.1129 (http://kendoui.com)
* Copyright 2011 Telerik AD. All rights reserved.
*
* Kendo UI commercial licenses may be obtained at http://kendoui.com/license.
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3. For GPL requirements, please
* review: http://www.gnu.org/copyleft/gpl.html
*/

(function(a,b){function B(a,c){var d,e=c!==b;if(document.selection){a.focus();var d=document.selection.createRange();if(e)d.move("character",c),d.select();else{var f=a.createTextRange(),g=f.duplicate();f.moveToBookmark(d.getBookmark()),g.setEndPoint("EndToStart",f),c=g.text.length}}else a.selectionStart!==b&&(e?(a.focus(),a.setSelectionRange(c,c)):c=a.selectionStart);return c}function A(a,b){return'<span unselectable="on" class="k-link"><span class="k-icon k-arrow-'+a+'" title="'+b+'">'+b+"</span></span>"}var c=window.kendo,d=c.keys,e=c.ui,f=e.Widget,g=c.parseFloat,h=c.support.touch,i="change",j="disabled",k="k-input",l="touchend",m=h?"touchstart":"mousedown",n=h?"touchmove "+l:"mouseup mouseleave",o="k-hide-text",p="k-state-default",q="k-state-focused",r="k-state-hover",s="mouseenter mouseleave",t=".",u="k-state-selected",v="k-state-disabled",w=null,x=a.proxy,y={190:".",188:","},z=f.extend({init:function(a,c){var d=this,e=c&&c[l]!==b,h,j,l,m,n;f.fn.init.call(d,a,c),c=d.options,a=d.element.addClass(k).bind({keydown:x(d._keydown,d),paste:x(d._paste,d),blur:x(d._focusout,d)}),a.closest("form").bind("reset",function(){setTimeout(function(){d.value(a[0].value)})}),d._wrapper(),d._arrows(),d._input(),d.bind(i,c),d._text.focus(x(d._click,d)),h=g(a.attr("min")),j=g(a.attr("max")),l=g(a.attr("step")),c.min===w&&h!==w&&(c.min=h),c.max===w&&j!==w&&(c.max=j),!e&&l!==w&&(c.step=l),n=c.format,n.slice(0,3)==="{0:"&&(c.format=n.slice(3,n.length-1)),m=c.value,d.value(m!==w?m:a.val()),d.enable(!a.is("[disabled]"))},options:{name:"NumericTextBox",min:w,max:w,value:w,step:1,format:"n",upArrowText:"Increase value",downArrowText:"Decrease value"},enable:function(a){var b=this,c=b._text,d=b.element;wrapper=b._inputWrapper,upArrow=b._upArrow,downArrow=b._downArrow,upArrow.unbind(m),downArrow.unbind(m),b._toggleText(!0),a===!1?(wrapper.removeClass(p).addClass(v).unbind(s),c.add(d).attr(j,j)):(wrapper.addClass(p).removeClass(v).bind(s,b._toggleHover),c.add(d).removeAttr(j),upArrow.bind(m,function(a){a.preventDefault(),b._spin(1),b._upArrow.addClass(u)}),downArrow.bind(m,function(a){a.preventDefault(),b._spin(-1),b._downArrow.addClass(u)}))},value:function(a){var c=this;if(a===b)return c._value;c._update(a),c._old=c._value},_adjust:function(a){var b=this,c=b.options,d=c.min,e=c.max;d!==w&&a<d?a=d:e!==w&&a>e&&(a=e);return a},_arrows:function(){var b=this,d,e=b.options,f=b.element;d=f.siblings(".k-icon"),d[0]||(d=a(A("up",e.upArrowText)+A("down",e.downArrowText)).insertAfter(f),d.wrapAll('<span class="k-select"/>')),d.bind(n,function(a){(!h||c.eventTarget(a)!=a.currentTarget||a.type===l)&&clearTimeout(b._spinning),d.removeClass(u)}),b._upArrow=d.eq(0),b._downArrow=d.eq(1)},_blur:function(){var a=this;a._toggleText(!0),a._change(a.element.val())},_click:function(a){var b=this;clearTimeout(b._focusing),b._focusing=setTimeout(function(){var c=a.target,d=B(c),e=c.value.substring(0,d),f=b._format(b.options.format),g=f[","],h=new RegExp("\\"+g,"g"),i=new RegExp("([\\d\\"+g+"]+)(\\"+f[t]+")?(\\d+)?"),j=i.exec(e),k=0;j&&(k=j[0].replace(h,"").length,e.indexOf("(")!=-1&&b._value<0&&k++),b._focusin(),B(b.element[0],k)})},_change:function(a){var b=this;b._update(a),a=b._value,b._old!=a&&(b._old=a,b.trigger(i),b.element.trigger(i))},_focusin:function(){var a=this;clearTimeout(a._bluring),a._toggleText(!1),a.element.focus(),a._inputWrapper.addClass(q)},_focusout:function(){var a=this;a._bluring=setTimeout(function(){a._inputWrapper.removeClass(q),a._blur()},100)},_format:function(a){var b=this,d=b.options,e=c.culture().numberFormat;a.indexOf("c")>-1?e=e.currency:a.indexOf("p")>-1&&(e=e.percent);return e},_input:function(){var b=this,c="k-formatted-value",d=b.element.show()[0],e=b.wrapper,f;f=e.find(t+c),f[0]||(f=a("<input />").insertBefore(d).addClass(c)),d.type="text",f[0].type="text",f[0].style.cssText=d.style.cssText,b._text=f.attr("readonly",!0).addClass(d.className)},_keydown:function(a){var b=this,c=a.keyCode;c==d.DOWN?b._step(-1):c==d.UP?b._step(1):c==d.ENTER&&b._change(b.element.val()),b._prevent(c)&&!a.ctrlKey&&a.preventDefault()},_paste:function(a){var b=this,c=a.target,d=c.value;setTimeout(function(){g(c.value)===w&&b._update(d)})},_prevent:function(a){var b=this,c=!0,e=b.options.min,f=b.element[0],g=f.value,h=b._format(b.options.format)[t],i=B(f),j;a>16&&a<21||a>32&&a<37||a>47&&a<58||a>95&&a<106||a==45||a==46||a==d.LEFT||a==d.RIGHT||a==d.TAB||a==d.BACKSPACE||a==d.ENTER?c=!1:y[a]===h&&g.indexOf(h)==-1?c=!1:!(e===w||e<0)||g.indexOf("-")!=-1||a!=189&&a!=109||i!=0?a==110&&g.indexOf(h)==-1&&(j=g.substring(i),f.value=g.substring(0,i)+h+j):c=!1;return c},_spin:function(a,b){var c=this;b=b||500,clearTimeout(c._spinning),c._spinning=setTimeout(function(){c._spin(a,50)},b),c._step(a)},_step:function(a){var b=this,c=b.element,d=g(c.val())||0;document.activeElement!=c[0]&&b._focusin(),d+=b.options.step*g(a),b._update(b._adjust(d))},_toggleHover:function(b){h||a(b.currentTarget).toggleClass(r,b.type==="mouseenter")},_toggleText:function(a){var b=this;a=!!a,b._text.toggle(a),b.element.toggle(!a)},_update:function(a){var d=this,e=d.options,f=e.format,h=e.decimals,i=d._format(f),j;h===b&&(h=i.decimals),a=g(a),j=a!==w,j&&(a=parseFloat(a.toFixed(h))),d._value=a=d._adjust(a),d._text.val(j?c.toString(a,f):e.placeholder),d.element.val(j?a.toString().replace(t,i[t]):"")},_wrapper:function(){var b=this,c=b.element,d;d=c.parent(),d.is("span.k-widget")||(d=c.hide().wrap('<span class="k-numeric-wrap k-state-default" />').parent(),d=d.wrap("<span/>").parent()),d[0].style.cssText=c[0].style.cssText,b.wrapper=d.addClass("k-widget k-numerictextbox").show(),b._inputWrapper=a(d[0].firstChild)}});e.plugin(z)})(jQuery)